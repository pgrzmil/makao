CREATE TABLE [dbo].[ArchiveGames] (
    [ArchiveGameID] [int] NOT NULL IDENTITY,
    [Date] [datetime] NOT NULL,
    [Points] [int] NOT NULL,
    [Player_PlayerID] [int],
    [WinnerID_PlayerID] [int],
    CONSTRAINT [PK_dbo.ArchiveGames] PRIMARY KEY ([ArchiveGameID])
)
CREATE INDEX [IX_Player_PlayerID] ON [dbo].[ArchiveGames]([Player_PlayerID])
CREATE INDEX [IX_WinnerID_PlayerID] ON [dbo].[ArchiveGames]([WinnerID_PlayerID])
CREATE TABLE [dbo].[Players] (
    [PlayerID] [int] NOT NULL IDENTITY,
    [Name] [nvarchar](max),
    [SessionId] [nvarchar](max),
    [ConnectionId] [nvarchar](max),
    [IsReady] [bit] NOT NULL,
    [IsTurn] [bit] NOT NULL,
    [ArchiveGame_ArchiveGameID] [int],
    [GameRoom_GameRoomId] [nvarchar](128),
    CONSTRAINT [PK_dbo.Players] PRIMARY KEY ([PlayerID])
)
CREATE INDEX [IX_ArchiveGame_ArchiveGameID] ON [dbo].[Players]([ArchiveGame_ArchiveGameID])
CREATE INDEX [IX_GameRoom_GameRoomId] ON [dbo].[Players]([GameRoom_GameRoomId])
CREATE TABLE [dbo].[Cards] (
    [CardId] [nvarchar](128) NOT NULL,
    [Suit] [int] NOT NULL,
    [Rank] [int] NOT NULL,
    [Player_PlayerID] [int],
    [GameRoom_GameRoomId] [nvarchar](128),
    CONSTRAINT [PK_dbo.Cards] PRIMARY KEY ([CardId])
)
CREATE INDEX [IX_Player_PlayerID] ON [dbo].[Cards]([Player_PlayerID])
CREATE INDEX [IX_GameRoom_GameRoomId] ON [dbo].[Cards]([GameRoom_GameRoomId])
CREATE TABLE [dbo].[Users] (
    [UserID] [int] NOT NULL,
    [Username] [nvarchar](max),
    [Password] [nvarchar](max),
    [Email] [nvarchar](max),
    [RankingPoints] [int] NOT NULL,
    CONSTRAINT [PK_dbo.Users] PRIMARY KEY ([UserID])
)
CREATE INDEX [IX_UserID] ON [dbo].[Users]([UserID])
CREATE TABLE [dbo].[GameRooms] (
    [GameRoomId] [nvarchar](128) NOT NULL,
    [Name] [nvarchar](max),
    [NumberOfPlayers] [int] NOT NULL,
    [MoveTime] [int] NOT NULL,
    [CurrentPlayerIndex] [int] NOT NULL,
    [IsRunning] [bit] NOT NULL,
    CONSTRAINT [PK_dbo.GameRooms] PRIMARY KEY ([GameRoomId])
)
ALTER TABLE [dbo].[ArchiveGames] ADD CONSTRAINT [FK_dbo.ArchiveGames_dbo.Players_Player_PlayerID] FOREIGN KEY ([Player_PlayerID]) REFERENCES [dbo].[Players] ([PlayerID])
ALTER TABLE [dbo].[ArchiveGames] ADD CONSTRAINT [FK_dbo.ArchiveGames_dbo.Players_WinnerID_PlayerID] FOREIGN KEY ([WinnerID_PlayerID]) REFERENCES [dbo].[Players] ([PlayerID])
ALTER TABLE [dbo].[Players] ADD CONSTRAINT [FK_dbo.Players_dbo.ArchiveGames_ArchiveGame_ArchiveGameID] FOREIGN KEY ([ArchiveGame_ArchiveGameID]) REFERENCES [dbo].[ArchiveGames] ([ArchiveGameID])
ALTER TABLE [dbo].[Players] ADD CONSTRAINT [FK_dbo.Players_dbo.GameRooms_GameRoom_GameRoomId] FOREIGN KEY ([GameRoom_GameRoomId]) REFERENCES [dbo].[GameRooms] ([GameRoomId])
ALTER TABLE [dbo].[Cards] ADD CONSTRAINT [FK_dbo.Cards_dbo.Players_Player_PlayerID] FOREIGN KEY ([Player_PlayerID]) REFERENCES [dbo].[Players] ([PlayerID])
ALTER TABLE [dbo].[Cards] ADD CONSTRAINT [FK_dbo.Cards_dbo.GameRooms_GameRoom_GameRoomId] FOREIGN KEY ([GameRoom_GameRoomId]) REFERENCES [dbo].[GameRooms] ([GameRoomId])
ALTER TABLE [dbo].[Users] ADD CONSTRAINT [FK_dbo.Users_dbo.Players_UserID] FOREIGN KEY ([UserID]) REFERENCES [dbo].[Players] ([PlayerID])
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](150) NOT NULL,
    [ContextKey] [nvarchar](300) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
)
INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201604150012075_init', N'Makao.Data.Migrations.Configuration',  0x1F8B0800000000000400ED5DDB72E3B8117D4F55FE81A5A724E5B56C4F2EB32E79B7667DD955766D4F2CCF266F2E588465D690A042825EB952F9B23CE493F20B01085E70274052B226959A170B6C1C34BA1B4003E8C6FCE75FFF9E7DBB49E2E005667994A2B3C9F1E1D12480689986115A9D4D0AFCF4D5FBC9B7DFFCFA57B3CB30D9043FD774EF281DA989F2B3C933C6EBD3E9345F3EC304E48749B4CCD23C7DC287CB349982309D9E1C1D7D3D3D3E9E42023121584130BB2B108E1258FE203FCF53B4846B5C80F83A0D619C57E5E4CBA2440D6E4002F33558C2B3C935F80CD2C30B80C124F810478070B080F1D3240008A51860C2DFE9A71C2E7096A2D5624D0A407CFFBA8684EE09C439ACF83E6DC95DBB707442BB306D2BD650CB22C769E20978FCAE92C954AEDE4BB2934666A53C93750C37B4DBA5E8CE261770F97912C82D9D9EC71925AAA5CAA47F48890F02BEE8A0513DB110FAEF20382F625C64F00CC10267203E083E168F71B4FC11BEDEA79F213A43451C4F8229CFD625513A7EE5B8FA902D9FA317F83DF9E1CC1C57671C1E390E098FE49B50408A3E66E91A66F8F50E3EA97CCF2FC44E12FAA98CD120E8ABB34ECE117E7732096E084BE031868DB5720259E03483DF4304338061F811600C33626CF31096825518919A256306D6ADD1BFEF232A76A5413BC8C7344238EF625AC2B8012FD1AAEC838C168357A2B4497007E3F27BFE1CADD980E615FDD0D05D65697297C6A210EBCF0F8BB4C896B48FA999E61E642B88DD59FC6B8488C0A99E3A786C09F54CD6DFAD5C36443A3667D3760459C715EBABF39062E46F369A58F37D06525B735763E8A69CAA586B648921ABE484886DF313442BFC4CC5BA21EA8F3630AC4B2A0E3EA1882CAAA412CE8ACE31B6803995FC3CDC7A4B64E145708977D3D83CBF83207CADDBF92E25D60F90F70C34CFEF8B0C79A318073837FCF41311B3B20791AE1DE39ACFCA10D7D1F84E443F0014DAF863DF15BE68B1899FF29B2F1FC4B9CA6C7CB0EF0A1FB4D8C447F96DD08C770EB2D079BEA3C46F36DBD1C6E960F39DEBEA7AC6417A7CF2DE69907A0EB74511E1A655AA66CA082DCCBDA1EE00FAAC40D1C22E28673360B6E7680694F8CDCC8036DE67C9ABEB79F95F1A0CB48B85EC23C8F35FD26CFB4BCB6502A278EBAD505325C8DB7081FB4EA8F5A4A99B50EBC9B6D748A26BD45D9A26CEA3A9AEF06623AA66A0CFE4CAD7DDF504CBB6E6DCACC80A3C5176E298DE14C923CC6E9F9AEDD89059E83A7DA9B6A04350CE8B2C23AE7BB5134021DC0CC3234E6A815029BEB11C4CDB26B7363CDD0E57FEA6784F0A81AF2BB7C0809A9A8DAF8A44C355F9C5CC13FBECE7D41589E4D2557EC63CBF8AC1AA3DC1F3F0F34A84910EB33E11F3CAE257621CBC8589B2BE867488D4F25D83906E167E0671417E1E299A11A87F8020C32DF5B19DFA2202498AC296FEC44E7F1E178F2DF13B55254CF81D0AA9BCB5010A2911DE4A211FA8A9BA69E3C7720E70D3C55F0A0891AB22FE5C0E28BD1E64DA7B0EF6F776D29B08B57DFB839DF6325A3DE386F88F76E2057CE1B8F8530771B46948DFDB49AFC84EB8A1FDBA8396CC32AD323A3477FF9CC116F9B84377F7BFA42DED89CBB0F890E7E9322AED5C98E1C51302B1C94B14060EC705AD1350BB85D76420446B62FA64C224367B78A876C78EDD78882DB670EC2E36F03B59005C679D64509E4274F0271E498CD367E12843DA628EDEC9D223EF60483CEFE8EAA4430F457FBF0564DB832E38E22743EA2845203E272B3D9954C9264675AA23B48CD620367745AAE275A04B45DD34217FB9806B88E829ACB9D72E6DEBF7D5B4E5A601696FD025190FF3D05D5998B46ABDBF701AAB1D03C376F9D1698FFD8788F64AC48547F57EA4CF8CD50DEF2C0355BE1E62501C7B138F662FBFE5AFDD8C7B5980717FB045F54B1B874ED6A45DC4787D16F71F23AD086CE342A6094C2689D6150718D032B8C11A5798CC4895379C57BB6C99778AB980587B1FD16E95744341118308D56C2A15945AED1D005456BAEA4C861D95E954ACABCC16AC8ECAB51E7500AD6948209CD6642148D7371CA5E596475E43DCBCB8A62B9C0294E5C8CD69E3A044FEE5032EB1E7EE526197464669A8DE5CA73FD7AFF782FBC641540638567799E919BBABFA759D9E5DBFEE0ABE1C07510D99C1DDD5C64EA8DDEEF4579C3D164743757650BAC53A502A6DB4865D2C7A17C6DD89192A18C56DD98A64D46348552A768FC6CDA7E198E726788B288C2ECC76C5509D7A5A84A0716F5C1C9CFE0210FD990153647DFCDA7831CDB7D994855B5605B3A9212E73760DD6EB08ADB838CDAA2458B020CDF3AF16FE518C09C3982E05D3927DAEA6259C666005A5AF34A4258457519663EA953D027A3A791E260A19EFB3193C91BA258D5BA6EAAB7651EA4AF4EFEA9EA30958157C3775335B55BD22DD4AE83EB80C55D2CF1F6AED80C6CA821864F658C3F3342E12E410C568C36481843C142B7147A8AF50798CBA4C45994D25D1287B7B45FED2609075EAA471F33CE7A4ECCAC5F6D7B3A9A25198CD718B204EE3218C19895D22F228379A6D860D810B5DE361B862772C31388D8713BFB8233611683C5853E883C342D0441856B637E6CBD6859EC65B6EF0FC4D575FCDA8E02AA44950AD363CCA86C20294046B2B4BDC11585C128FC04AF646956C5BD05395BA4D8D832AF5D54C22AC8F5D79219A8E62ED28489983DA528F05A6893C12E6C4A6D41DA90A2DE261AA223F03E30287644BE33EED8DC9B5DE694FB36B0E69FC4DCF5CD524603E7E8797AE3926C886367C195402650430F9A33B6E1B33C303B6A51E8BAB266E46988735DFBD16DA3A8A465A6AEBE2DD1BBAB821D2B97AD219A1C5AB93283D3C75BAB5D3FA6FDAB3445548DE1EE083ED368E63A61F9FC69BB99137235656893B1846E51DC43CA7515A4D588A8734E40D735F136207AA36D361142E9E935907FC89EB3EDA087F9CEBC89F8F33B8FFD6A03D80ED3A136829DDB6841AF95BCE68471DA30F43C6AB1BDB7EE6E3BB091E6E42CED218D598DA73EB4E6B6A4987AD4FB6E3E841DA69C0469B7E6C47F15FC01AD52990C1A6A41EF45B9DF7116624D35D80A33ABA3CFB079B8BEF693DA6CB86BD9D821C84309EC5547722767BA9887A7A37FA4B937DB614E156662F3D9D516C44B93392499ACD5B737724DD11CDAAFB9AEE073E940B1C46320988185EA2905EDE2C5E730C13667A8BBFC7E77144B68B2DC13540D113CC310B159F9C1C1DBD97DE0AD99F773BA6791E0AE94EF6573244BDBDD96315111577672ABD6F2214F73E4548FEC6C3DFA728F9F44590B7061C9412DC559E8C9C4DFE51D63D0DE67F7B90AA1F04B71931C9D3E028F827CF8A4BBA95C61DF0E3450170E7C6F7AD891E8639DEBB0F5B314776E6C71A402F800C0390FD26019BDFFAAA5179CE61109AEEC9864180D2B30C8F91FF90119F64E88360D94CF999BC1168C840D4AEA1A2E89D98D3E0886CC9D9A6A38C50D5F9DAE54B05AD80CC9DF37E88A0CFBCCEBF3EF065AF0B5FB6396A926776F86282ABBA582D93967A3DB3306896969F521804263C97300849FB2442F7E8F27F86A087C18CFB20C068F3D8687E85211BBFCFDC26E7E2F7C13067E2F74153F2F0BBBD0A93518D91AF393C4F51C8DBE89BDA34208B6F77997BF6284753A3D643E01DE4EEB9E7AF0EB705963EE39793F4A568DF1039B6E76A77C8E81D98C5CB524F3AF276B576F345A8DD1065F6BF91A03B5246AEB31D8D34F47D27E2CEFB2DCFE46DDF46BB2F95776C229DF9CBFF770E7C2DC3D7269DEE88776016DEF9DC632433EF7AC2B0C46CFA6CAFB6355538DEE4EDD21ADCB2DCC7B0855DFA8C6F6107CE7EE35B59813EF75F4D37931568CCEEEF4AEE67F79E6793F031258A67DB5E6B16B83EFDDF92FDAF6BC1944DA97B1AC0F832800E589FA7A87B34C0F866800E569F326D7A4EC0FA9A800EDE98A5B9F3C7063439AFAE59C4A634E4FD7A47C0B783BC05B651267BF556806F9778EB6FB370F6FF3D005703EB27A2FD49F5DFE791B8A51C7E6DCEFA9BE9750B19FAFE1D1C3AF17864E0AB5153C483E1FEF324E246E5D1AA8598B5E1012D684D33474F69ED4F491CD524F2BD00C420248ECD870C474F6089C9E7258D66E09EC6BC4C1E613847B7055E17987419268FB1904C4B5D315BFBE5330322CFB3DB75F91EED185D206C46349AE8167D574471D8F07DA5B9403040501FAF0A2CA1BAC434C064F5DA20DDA4C811A8125FE39ADEC3641D13B0FC162D00F71AA6076F6481F809AEC0F2B50E7E3383742B4214FBEC2202AB0C247985D1D6273F890D87C9E69BFF0290174957436C0000 , N'6.1.3-40302')

